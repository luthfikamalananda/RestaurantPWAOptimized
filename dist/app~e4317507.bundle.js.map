{"version":3,"file":"app~e4317507.bundle.js","mappings":"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","sources":["webpack://restaurant-apps/./src/scripts/routes/routes.js","webpack://restaurant-apps/./src/scripts/routes/url-parser.js","webpack://restaurant-apps/./src/scripts/utils/drawer-initiator.js","webpack://restaurant-apps/./src/scripts/utils/form-review-initiator.js","webpack://restaurant-apps/./src/scripts/utils/like-button-initiator.js","webpack://restaurant-apps/./src/scripts/utils/sw-register.js"],"sourcesContent":["import Home from '../views/pages/home';\r\nimport Detail from '../views/pages/detail';\r\nimport Like from '../views/pages/like';\r\n\r\nconst routes = {\r\n  '/': Home,\r\n  '/home': Home,\r\n  '/detail/:id': Detail,\r\n  '/like': Like,\r\n};\r\n\r\nexport default routes;\r\n","/* eslint-disable no-underscore-dangle */\r\nconst UrlParser = {\r\n  parseActiveUrlWithCombiner() {\r\n    const url = window.location.hash.slice(1).toLowerCase();\r\n    const splitedUrl = this._urlSplitter(url);\r\n    return this._urlCombiner(splitedUrl);\r\n  },\r\n\r\n  parseActiveUrlWithoutCombiner() {\r\n    const url = window.location.hash.slice(1).toLowerCase();\r\n    return this._urlSplitter(url);\r\n  },\r\n\r\n  _urlSplitter(url) {\r\n    const urlsSplits = url.split('/');\r\n    return {\r\n      resource: urlsSplits[1] || null,\r\n      id: urlsSplits[2] || null,\r\n      verb: urlsSplits[3] || null,\r\n    };\r\n  },\r\n\r\n  _urlCombiner(splitedUrl) {\r\n    return (splitedUrl.resource ? `/${splitedUrl.resource}` : '/')\r\n      + (splitedUrl.id ? '/:id' : '')\r\n      + (splitedUrl.verb ? `/${splitedUrl.verb}` : '');\r\n  },\r\n};\r\n\r\nexport default UrlParser;\r\n","/* eslint-disable no-underscore-dangle */\r\nconst DrawerInitiator = {\r\n  init({ button, drawer, content }) {\r\n    button.addEventListener('click', (event) => {\r\n      this._toggleDrawer(event, drawer);\r\n    });\r\n\r\n    content.addEventListener('click', (event) => {\r\n      this._closeDrawer(event, drawer);\r\n    });\r\n  },\r\n\r\n  _toggleDrawer(event, drawer) {\r\n    event.stopPropagation();\r\n    drawer.classList.toggle('open');\r\n  },\r\n\r\n  _closeDrawer(event, drawer) {\r\n    event.stopPropagation();\r\n    drawer.classList.remove('open');\r\n  },\r\n};\r\n\r\nexport default DrawerInitiator;\r\n","import RestaurantSource from '../data/restaurant-source';\r\n\r\nconst formReview = (form, idRestaurant) => {\r\n  form.addEventListener('submit', async (e) => {\r\n    const data = new FormData(e.target);\r\n\r\n    const id = idRestaurant;\r\n    const name = data.get('name');\r\n    const review = data.get('review');\r\n\r\n    const reviewData = {\r\n      id,\r\n      name,\r\n      review,\r\n    };\r\n\r\n    await RestaurantSource.uploadReview(reviewData);\r\n    window.location.reload();\r\n  });\r\n};\r\n\r\nexport default formReview;\r\n","/* eslint-disable no-underscore-dangle */\r\n// import FavoriteRestaurantIdb from '../data/favorite-restaurant-idb';\r\nimport { createLikeButtonTemplate, createLikedButtonTemplate } from '../views/templates/template-creator';\r\n\r\nconst LikeButtonInitiator = {\r\n  async init({ likeButtonContainer, restaurant, favoriteRestaurants }) {\r\n    this._likeButtonContainer = likeButtonContainer;\r\n    this._restaurant = restaurant;\r\n    this._favoriteRestaurants = favoriteRestaurants;\r\n\r\n    await this._renderButton();\r\n  },\r\n\r\n  async _renderButton() {\r\n    const { id } = this._restaurant;\r\n\r\n    if (await this._isRestaurantExist(id)) {\r\n      this._renderLiked();\r\n    } else {\r\n      this._renderLike();\r\n    }\r\n  },\r\n\r\n  async _isRestaurantExist(id) {\r\n    const restaurant = await this._favoriteRestaurants.getRestaurant(id);\r\n    return !!restaurant;\r\n  },\r\n\r\n  _renderLike() {\r\n    this._likeButtonContainer.innerHTML = createLikeButtonTemplate();\r\n\r\n    const likeButton = document.querySelector('#likeButton');\r\n    likeButton.addEventListener('click', async () => {\r\n      await this._favoriteRestaurants.putRestaurant(this._restaurant);\r\n      this._renderButton();\r\n    });\r\n  },\r\n\r\n  _renderLiked() {\r\n    this._likeButtonContainer.innerHTML = createLikedButtonTemplate();\r\n\r\n    const likeButton = document.querySelector('#likeButton');\r\n    likeButton.addEventListener('click', async () => {\r\n      await this._favoriteRestaurants.deleteRestaurant(this._restaurant.id);\r\n      this._renderButton();\r\n    });\r\n  },\r\n};\r\n\r\nexport default LikeButtonInitiator;\r\n","import * as WorkboxWindow from 'workbox-window';\r\n\r\nconst swRegister = async () => {\r\n  if (!('serviceWorker' in navigator)) {\r\n    console.log('Service Worker not supported in the browser');\r\n    return;\r\n  }\r\n\r\n  const wb = new WorkboxWindow.Workbox('./sw.bundle.js');\r\n\r\n  try {\r\n    await wb.register();\r\n    console.log('Service worker registered');\r\n  } catch (error) {\r\n    console.log('Failed to register service worker', error);\r\n  }\r\n};\r\n\r\nexport default swRegister;\r\n"],"names":["Home","Detail","Like","parseActiveUrlWithCombiner","url","window","location","hash","slice","toLowerCase","splitedUrl","this","_urlSplitter","_urlCombiner","parseActiveUrlWithoutCombiner","urlsSplits","split","resource","id","verb","init","button","drawer","content","addEventListener","event","_toggleDrawer","_closeDrawer","stopPropagation","classList","toggle","remove","form","idRestaurant","e","data","FormData","target","name","get","review","reviewData","RestaurantSource","reload","likeButtonContainer","restaurant","favoriteRestaurants","_likeButtonContainer","_restaurant","_favoriteRestaurants","_renderButton","_isRestaurantExist","_renderLiked","_renderLike","getRestaurant","innerHTML","createLikeButtonTemplate","document","querySelector","putRestaurant","createLikedButtonTemplate","deleteRestaurant","navigator","console","log","wb","WorkboxWindow","register"],"sourceRoot":""}